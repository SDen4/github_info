{"version":3,"sources":["components/FavoriteList/FavoriteList.tsx","components/FavoriteList/FavoriteList.module.css"],"names":["FavoriteList","favoriteList","searchList","currentUserLogin","userListOpened","reposListOpened","isMobile","dispatch","useDispatch","useState","deleteModal","setDeleteModal","deletedElem","setDeletedElem","className","styles","shlWrapper","listHeader","CloseButton","onClick","favoriteListFlag","list","map","el","itemWrapper","shlButton","type","login","userListOpenedFlag","cardOPenedFlag","reposOpenedListFlag","searchSaga","searchHistoriListBtnHandler","name","note","icon","clsx","deleteListItemBtn","tooltip","delElem","tooltipText","clearButton","modalFlag","length","miniModal","deletedUserLogin","btnsWrapper","newFavoriteUsersList","filter","fetchFavoriteList","localStorage","setItem","JSON","stringify","favoriteUserFlag","deleteBtnHandler","memo","module","exports"],"mappings":"oPAuBMA,EAAwC,SAAC,GAOxC,IANLC,EAMI,EANJA,aACAC,EAKI,EALJA,WACAC,EAII,EAJJA,iBACAC,EAGI,EAHJA,eACAC,EAEI,EAFJA,gBACAC,EACI,EADJA,SAEMC,EAAWC,cAEjB,EAAsCC,oBAAkB,GAAxD,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAAsCF,mBAAiB,IAAvD,mBAAOG,EAAP,KAAoBC,EAApB,KA0EA,OACE,sBAAKC,UAAWC,IAAOC,WAAvB,UACE,sBAAKF,UAAWC,IAAOE,WAAvB,UACE,+CACA,cAACC,EAAA,EAAD,CAAaC,QA5EK,WACtBZ,EAASa,aAAiB,UAwFxB,oBAAIN,UAAWC,IAAOM,KAAtB,SACGpB,EAAaqB,KAAI,SAACC,GAAD,OAChB,6BACE,sBAAKT,UAAWC,IAAOS,YAAvB,UACE,wBACEV,UAAWC,IAAOU,UAClBC,KAAK,SACLP,QAAS,kBA5Fa,SAACQ,GACnC,GAAIA,IAAUxB,EASZ,OARIC,IACFG,EAASqB,aAAmB,IAC5BrB,EAASsB,aAAe,UAEtBxB,IACFE,EAASuB,aAAoB,IAC7BvB,EAASsB,aAAe,MAI5BtB,EAASwB,YAAWJ,EAAOzB,EAAYI,EAAUL,IAgFtB+B,CAA4BT,EAAGU,OAHhD,SAKGV,EAAGU,OAGLV,EAAGW,MAAQ,qBAAKpB,UAAWC,IAAOoB,KAAvB,oBAEZ,wBACET,KAAK,SACLZ,UAAWsB,YAAKrB,IAAOsB,kBAAmBtB,IAAOuB,SACjDnB,QAAS,kBA3EEoB,EA2EoBhB,EAAGU,KA1E9CtB,GAAe,QACfE,EAAe0B,GAFO,IAACA,GAwEb,SAKE,qBAAKzB,UAAWC,IAAOyB,YAAvB,0BAjBGjB,EAAGU,WAwBhB,wBACEnB,UAAWC,IAAO0B,YAClBf,KAAK,SACLP,QAnGkB,WACtBZ,EACEmC,aACE,EADO,iCAEmBzC,EAAa0C,OAAS,EAAI,MAAQ,GAFrD,iBAGL1C,EAAa0C,OAAS,EAAtB,WAA8B1C,EAAa0C,OAA3C,KAAuD,GAHlD,qBAIM1C,EAAa0C,OAAS,EAAI,QAAU,OAJ1C,KAKP,cAyFF,uCAQCjC,GACC,sBAAKI,UAAWC,IAAO6B,UAAvB,UACE,+DAC8B,IAC5B,sBAAM9B,UAAWC,IAAO8B,iBAAxB,SAA2CjC,IAF7C,0BAKA,sBAAKE,UAAWC,IAAO+B,YAAvB,UACE,wBAAQpB,KAAK,SAASP,QAAS,kBA/FhB,SAACoB,GACxB,IAAMQ,EAAuB9C,EAAa+C,QACxC,SAACzB,GAAD,OAAQA,EAAGU,OAASM,KAEtBhC,EAAS0C,YAAkBF,IAC3BG,aAAaC,QAAQ,WAAYC,KAAKC,UAAUN,IAC5C5C,IAAqBoC,GACvBhC,EAAS+C,aAAiB,IAE5B3C,GAAe,GACfE,EAAe,IAqF8B0C,CAAiB3C,IAAtD,oBAGA,wBAAQc,KAAK,SAASP,QAAS,kBApFvCR,GAAe,QACfE,EAAe,KAmFP,8BAUG2C,iBAAKxD,I,mBCnLpByD,EAAOC,QAAU,CAAC,WAAa,iCAAiC,KAAO,2BAA2B,YAAc,kCAAkC,UAAY,gCAAgC,YAAc,kCAAkC,kBAAoB,wCAAwC,UAAY,gCAAgC,YAAc,kCAAkC,iBAAmB,uCAAuC,KAAO,2BAA2B,QAAU,8BAA8B,YAAc,kCAAkC,YAAc,kCAAkC,oBAAsB,0CAA0C,WAAa","file":"static/js/7.e9a352d2.chunk.js","sourcesContent":["import React, { memo, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport clsx from 'clsx';\n\nimport CloseButton from '../../ui/CloseButton';\n\nimport {\n  cardOPenedFlag,\n  modalFlag,\n  reposOpenedListFlag,\n  userListOpenedFlag,\n} from '../../store/SearchReducer/actions';\nimport { searchSaga } from '../../store/SearchReducer/actionsSagas';\nimport {\n  favoriteListFlag,\n  favoriteUserFlag,\n  fetchFavoriteList,\n} from '../../store/FavoriteReduser/actions';\n\nimport { IFavoriteList } from './types';\n\nimport styles from './FavoriteList.module.css';\n\nconst FavoriteList: React.FC<IFavoriteList> = ({\n  favoriteList,\n  searchList,\n  currentUserLogin,\n  userListOpened,\n  reposListOpened,\n  isMobile,\n}) => {\n  const dispatch = useDispatch();\n\n  const [deleteModal, setDeleteModal] = useState<boolean>(false);\n  const [deletedElem, setDeletedElem] = useState<string>('');\n\n  const closeBtnHandler = () => {\n    dispatch(favoriteListFlag(false));\n  };\n\n  const searchHistoriListBtnHandler = (login: string) => {\n    if (login === currentUserLogin) {\n      if (userListOpened) {\n        dispatch(userListOpenedFlag(false));\n        dispatch(cardOPenedFlag(true));\n      }\n      if (reposListOpened) {\n        dispatch(reposOpenedListFlag(false));\n        dispatch(cardOPenedFlag(true));\n      }\n      return;\n    }\n    dispatch(searchSaga(login, searchList, isMobile, favoriteList));\n  };\n\n  const clearBtnHandler = () => {\n    dispatch(\n      modalFlag(\n        true,\n        `Are you sure to delete ${favoriteList.length > 1 ? 'all' : ''} your ${\n          favoriteList.length > 1 ? `(${favoriteList.length})` : ''\n        } favorite ${favoriteList.length > 1 ? 'users' : 'user'}?`,\n        'favorite',\n      ),\n    );\n  };\n\n  const openDeleteModal = (delElem: string) => {\n    setDeleteModal(true);\n    setDeletedElem(delElem);\n  };\n\n  const deleteBtnHandler = (delElem: string) => {\n    const newFavoriteUsersList = favoriteList.filter(\n      (el) => el.name !== delElem,\n    );\n    dispatch(fetchFavoriteList(newFavoriteUsersList));\n    localStorage.setItem('favorite', JSON.stringify(newFavoriteUsersList));\n    if (currentUserLogin === delElem) {\n      dispatch(favoriteUserFlag(false));\n    }\n    setDeleteModal(false);\n    setDeletedElem('');\n  };\n\n  const cancelDelete = () => {\n    setDeleteModal(false);\n    setDeletedElem('');\n  };\n\n  // const onDownloadHandler = () => {\n  // let element = document.createElement('a');\n  // const usersArr = favoriteList.map((el) => {\n  //   console.log(el);\n  //   return fileText(el, el.note);\n  // });\n  // const text = fileText(user, note);\n  // element.setAttribute(\n  //   'href',\n  //   `data:text/plain;charset=utf-8,${encodeURIComponent(text)}`,\n  // );\n  // element.setAttribute('download', `${user.login}.doc`);\n  // element.style.display = 'none';\n  // document.body.appendChild(element);\n  // element.click();\n  // document.body.removeChild(element);\n  // };\n\n  return (\n    <div className={styles.shlWrapper}>\n      <div className={styles.listHeader}>\n        <h3>Favorite list</h3>\n        <CloseButton onClick={closeBtnHandler} />\n      </div>\n      {/* <button\n          type=\"button\"\n          className={clsx(styles.button, styles.downloadBtn, styles.tooltip)}\n          onClick={onDownloadHandler}\n        >\n          <span>&#10515;</span>\n          <div className={clsx(styles.tooltipText, styles.tooltipTextDownload)}>\n            Download list\n          </div>\n        </button> */}\n\n      <ol className={styles.list}>\n        {favoriteList.map((el) => (\n          <li key={el.name}>\n            <div className={styles.itemWrapper}>\n              <button\n                className={styles.shlButton}\n                type=\"button\"\n                onClick={() => searchHistoriListBtnHandler(el.name)}\n              >\n                {el.name}\n              </button>\n\n              {el.note && <div className={styles.icon}>&#9998;</div>}\n\n              <button\n                type=\"button\"\n                className={clsx(styles.deleteListItemBtn, styles.tooltip)}\n                onClick={() => openDeleteModal(el.name)}\n              >\n                <div className={styles.tooltipText}>Delete</div>\n              </button>\n            </div>\n          </li>\n        ))}\n      </ol>\n\n      <button\n        className={styles.clearButton}\n        type=\"button\"\n        onClick={clearBtnHandler}\n      >\n        Delete all favorite users\n      </button>\n\n      {deleteModal && (\n        <div className={styles.miniModal}>\n          <span>\n            Are you sure to delete user{' '}\n            <span className={styles.deletedUserLogin}>{deletedElem}</span> from\n            favorite list?\n          </span>\n          <div className={styles.btnsWrapper}>\n            <button type=\"button\" onClick={() => deleteBtnHandler(deletedElem)}>\n              Delete\n            </button>\n            <button type=\"button\" onClick={() => cancelDelete()}>\n              Cansel\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(FavoriteList);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"shlWrapper\":\"FavoriteList_shlWrapper__3V_gW\",\"list\":\"FavoriteList_list__2QGkZ\",\"itemWrapper\":\"FavoriteList_itemWrapper__2s9iZ\",\"shlButton\":\"FavoriteList_shlButton__2f6sJ\",\"clearButton\":\"FavoriteList_clearButton__1Gswu\",\"deleteListItemBtn\":\"FavoriteList_deleteListItemBtn__3v20o\",\"miniModal\":\"FavoriteList_miniModal__1ywE8\",\"btnsWrapper\":\"FavoriteList_btnsWrapper__kMS9P\",\"deletedUserLogin\":\"FavoriteList_deletedUserLogin__2poIW\",\"icon\":\"FavoriteList_icon__2KEFF\",\"tooltip\":\"FavoriteList_tooltip__3XDot\",\"tooltipText\":\"FavoriteList_tooltipText__kS8vW\",\"downloadBtn\":\"FavoriteList_downloadBtn__1Y5nZ\",\"tooltipTextDownload\":\"FavoriteList_tooltipTextDownload__2RGyT\",\"listHeader\":\"FavoriteList_listHeader__1bpEX\"};"],"sourceRoot":""}